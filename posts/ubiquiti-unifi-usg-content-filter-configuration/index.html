<!doctype html><html lang="en" data-mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="Ubiquiti UniFi USG Content Filter Configuration" /><meta name="author" content="Steven Marks" /><meta property="og:locale" content="en" /><meta name="description" content="Recently I had a requirement to setup a content filter on the USG for a client. I couldn’t find much information online so have decided to write this article to show others how to do this" /><meta property="og:description" content="Recently I had a requirement to setup a content filter on the USG for a client. I couldn’t find much information online so have decided to write this article to show others how to do this" /><link rel="canonical" href="https://totaldebug.uk/posts/ubiquiti-unifi-usg-content-filter-configuration/" /><meta property="og:url" content="https://totaldebug.uk/posts/ubiquiti-unifi-usg-content-filter-configuration/" /><meta property="og:site_name" content="TotalDebug" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2019-09-17T15:00:00+01:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Ubiquiti UniFi USG Content Filter Configuration" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Steven Marks"},"dateModified":"2022-10-15T16:13:58+01:00","datePublished":"2019-09-17T15:00:00+01:00","description":"Recently I had a requirement to setup a content filter on the USG for a client. I couldn’t find much information online so have decided to write this article to show others how to do this","headline":"Ubiquiti UniFi USG Content Filter Configuration","mainEntityOfPage":{"@type":"WebPage","@id":"https://totaldebug.uk/posts/ubiquiti-unifi-usg-content-filter-configuration/"},"url":"https://totaldebug.uk/posts/ubiquiti-unifi-usg-content-filter-configuration/"}</script><title>Ubiquiti UniFi USG Content Filter Configuration | TotalDebug</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="TotalDebug"><meta name="application-name" content="TotalDebug"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css" /><link rel="stylesheet" href="/assets/css/style.css" /><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.20.1/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"><body><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"> <img src="/assets/img/logo.png" width="112" height="112" alt="avatar" onerror="this.style.display='none'"> </a><div class="site-title"> <a href="/">TotalDebug</a></div><div class="site-subtitle fst-italic">Technology. Inside Out</div></div><ul class="nav flex-column flex-grow-1 w-100 ps-0"><li class="nav-item"> <a href="/" class="nav-link"> <i class="bi bi-house ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="bi bi-list-nested ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="bi bi-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="bi bi-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="bi bi-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a><li class="nav-item"> <a href="/works/" class="nav-link"> <i class="bi bi-kanban ml-xl-3 mr-xl-3 unloaded"></i> <span>WORKS</span> </a></ul><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <a href="https://github.com/marksie1988" aria-label="github" target="_blank" rel="noopener noreferrer"> <i class="bi bi-github"></i> </a> <a href="https://www.linkedin.com/in/marksie1988" aria-label="linkedin" target="_blank" rel="noopener noreferrer"> <i class="bi bi-linkedin"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="bi bi-rss"></i> </a> <a href="https://discord.gg/6fmekudc8Q" aria-label="discord" > <i class="bi bi-discord"></i> </a></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container px-xxl-5"><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100" > <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Ubiquiti UniFi USG Content Filter Configuration</span> </span> <i id="sidebar-trigger" class="bi bi-list"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="bi bi-search"></i> <span id="search-wrapper" class="align-items-center"> <i class="bi bi-search"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel">Cancel</span></div></div><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pe-xl-4"><div class="post px-1 px-md-2"><h1 data-toc-skip>Ubiquiti UniFi USG Content Filter Configuration</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1568728800" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Sep 17, 2019 </em> </span> <span> Updated <em class="" data-ts="1665846838" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Oct 15, 2022 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://github.com/marksie1988">Steven Marks</a> </em> </span><div> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="386 words" > <em>2 min</em> read</span></div></div></div><div class="d-none"><div id="posted-date">1568728800</div><div id="updated-date">1665846838</div></div><blockquote class="d-none prompt-info" id="post-age-notification"></blockquote><div class="post-content"><p>Recently I had a requirement to setup a content filter on the USG for a client. I couldn’t find much information online so have decided to write this article to show others how to do this</p><p>First we need to logon to the USG via SSH, On windows I recommend <a href="https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html">Putty</a></p><p>Once we have logged in, run the below command:</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="bi bi-code-slash small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="bi bi-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>update webproxy blacklists
</pre></table></code></div></div><p><em>This will download all of the content filter categories to the USG, this can take some time as there is approx. 100MB (70-80MB is “adult”)</em></p><p>When this is completed run the following:</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="bi bi-code-slash small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="bi bi-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>configure
<span class="nb">set </span>service webproxy url-filtering squidguard block-category &amp;lt<span class="p">;</span>insert caregory&amp;gt<span class="p">;</span>
</pre></table></code></div></div><p><em>This will set the categories that you wish to block, repeating the command will add more categories. pressing ? will display a list of all available categories</em></p><p>We now need to set the web proxy listener address for the network we wish to filter:</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="bi bi-code-slash small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="bi bi-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">set </span>service webproxy listen-address &amp;lt<span class="p">;</span><span class="nt">-usg-lan-ip-</span>&amp;gt<span class="p">;</span>
</pre></table></code></div></div><p>You are also able to set a redirect URL:</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="bi bi-code-slash small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="bi bi-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">set </span>service webproxy url-filtering squidguard redirect-url &amp;lt<span class="p">;</span>url&amp;gt<span class="p">;</span>
</pre></table></code></div></div><p><em>The redirect URL is google.com by default, however you could create a custom “Blocked Website” page to make users aware.</em></p><p>Now we need to commit these changes to the USG:</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="bi bi-code-slash small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="bi bi-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>commit
</pre></table></code></div></div><p>The below example shows how we set this up on the network 10.10.10.1/24</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="bi bi-code-slash small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="bi bi-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>configure
<span class="nb">set </span>service webproxy url-filtering squidguard block-category adult
<span class="nb">set </span>service webproxy listen-address 10.10.10.1
<span class="nb">set </span>service webproxy url-filtering squidguard redirect-url spottedhyena.co.uk
commit
</pre></table></code></div></div><p>To make this a permanent change you can create a configuration file on the controller, run the command:</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="bi bi-code-slash small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="bi bi-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>mca-ctrl <span class="nt">-t</span> dump-cfg
</pre></table></code></div></div><p>Find the <code class="language-plaintext highlighter-rouge">service</code> section and delete all content other than the web proxy, it should looks similar to below:</p><div class="language-json highlighter-rouge"><div class="code-header"> <span data-label-text="JSON"><i class="bi bi-code-slash small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="bi bi-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre><td class="rouge-code"><pre><span class="nl">"service"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"webproxy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"cache-size"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"default-port"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3128"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"listen-address"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"10.10.10.1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"''"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"mem-cache-size"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"url-filtering"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"squidguard"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                                </span><span class="nl">"block-category"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                                        </span><span class="s2">"adult"</span><span class="w">
                                </span><span class="p">],</span><span class="w">
                                </span><span class="nl">"default-action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"allow"</span><span class="p">,</span><span class="w">
                                </span><span class="nl">"redirect-url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://spottedhyena.co.uk"</span><span class="w">
                        </span><span class="p">}</span><span class="w">
                </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><p>Save this information into a file on your controller</p><ul><li>File Location: /opt/UniFi/data/sites/[site name/default]/<li>File Name: config.gateway.json</ul><p>once you have done this whenever you make any changes to your USG the Content Filtering will be re-applied.</p><p>Hopefully this article has assisted you with your configuration. Any questions please let me know.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="bi bi-folder2-open mr-1"></i> <a href="/categories/networking/" >Networking</a >, <a href="/categories/unifi/" >Unifi</a ></div><div class="post-tags"> <i class="bi bi-tags mr-1"></i> <a href="/tags/usg/" class="post-tag no-text-decoration" >usg</a> <a href="/tags/filter/" class="post-tag no-text-decoration" >filter</a> <a href="/tags/website/" class="post-tag no-text-decoration" >website</a> <a href="/tags/configuration/" class="post-tag no-text-decoration" >configuration</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2" ><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted me-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Ubiquiti%20UniFi%20USG%20Content%20Filter%20Configuration%20-%20TotalDebug&url=https%3A%2F%2Ftotaldebug.uk%2Fposts%2Fubiquiti-unifi-usg-content-filter-configuration%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter" > <i class="fa-fw bi bi-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Ubiquiti%20UniFi%20USG%20Content%20Filter%20Configuration%20-%20TotalDebug&u=https%3A%2F%2Ftotaldebug.uk%2Fposts%2Fubiquiti-unifi-usg-content-filter-configuration%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook" > <i class="fa-fw bi bi-facebook"></i> </a> <a href="https://telegram.me/share?text=Ubiquiti%20UniFi%20USG%20Content%20Filter%20Configuration%20-%20TotalDebug&url=https%3A%2F%2Ftotaldebug.uk%2Fposts%2Fubiquiti-unifi-usg-content-filter-configuration%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram" > <i class="fa-fw bi bi-telegram"></i> </a> <a href="https://news.ycombinator.com/submitlink?t=Ubiquiti%20UniFi%20USG%20Content%20Filter%20Configuration%20-%20TotalDebug&u=https%3A%2F%2Ftotaldebug.uk%2Fposts%2Fubiquiti-unifi-usg-content-filter-configuration%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="HackerNews" target="_blank" rel="noopener" aria-label="HackerNews" > <i class="fa-fw bi bi-hacker-news"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Ftotaldebug.uk%2Fposts%2Fubiquiti-unifi-usg-content-filter-configuration%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin" > <i class="fa-fw bi bi-linkedin"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy link" data-title-succeed="Link copied successfully!" > </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 ps-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/posts/integrate-lux-inverter-with-home-assistant/">Integrating a Lux Power Inverter with Home Assistant</a><li class="text-truncate lh-lg"> <a href="/posts/automating-proxmox-with-terraform-ansible/">Automating deployments using Terraform with Proxmox and ansible</a><li class="text-truncate lh-lg"> <a href="/posts/jekyll-post-series-links/">Add series links to Jekyll posts</a><li class="text-truncate lh-lg"> <a href="/posts/two-factor-authentication-worth-really-add-security/">Two-Factor Authentication: is it worth it, does it really add more security?</a><li class="text-truncate lh-lg"> <a href="/posts/last4solar-my-solar-nightmare/">Last4Solar - My solar nightmare!</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/centos/">centos</a> <a class="post-tag btn btn-outline-primary" href="/tags/docker/">docker</a> <a class="post-tag btn btn-outline-primary" href="/tags/linux/">linux</a> <a class="post-tag btn btn-outline-primary" href="/tags/unifi/">unifi</a> <a class="post-tag btn btn-outline-primary" href="/tags/best-practices/">best practices</a> <a class="post-tag btn btn-outline-primary" href="/tags/code-quality/">code quality</a> <a class="post-tag btn btn-outline-primary" href="/tags/automation/">automation</a> <a class="post-tag btn btn-outline-primary" href="/tags/configuration/">configuration</a> <a class="post-tag btn btn-outline-primary" href="/tags/container/">container</a> <a class="post-tag btn btn-outline-primary" href="/tags/exchange/">exchange</a></div></div></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-3 pe-xl-4 mt-5"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ms-1" data-toc-skip> Further Reading</h3><div class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><div class="col"> <a href="/posts/setup-ubiquiti-unifi-usg-remote-user-vpn/" class="card post-preview h-100"><div class="card-body"> <em class="small" data-ts="1486142422" data-df="ll" > Feb 3, 2017 </em><h4 class="pt-0 my-2" data-toc-skip>Setup Ubiquiti UniFi USG Remote User VPN</h4><div class="text-muted small"><p> I have recently had loads of trouble setting up a Ubiquiti UniFi USG remote user VPN, the USG requires a RADIUS server in order to function correctly, the following article covers this setup freeRA...</p></div></div></a></div><div class="col"> <a href="/posts/setup-rsnapshot-backups-centos/" class="card post-preview h-100"><div class="card-body"> <em class="small" data-ts="1390262400" data-df="ll" > Jan 21, 2014 </em><h4 class="pt-0 my-2" data-toc-skip>Setup rSnapshot backups on CentOS</h4><div class="text-muted small"><p> In this article I will be talking you through how to use rSnapshot and rSync to backup your server with an email alert when the backup has been completed and what has been backed up. You must ...</p></div></div></a></div><div class="col"> <a href="/posts/understanding-resource-pools-vmware/" class="card post-preview h-100"><div class="card-body"> <em class="small" data-ts="1423440000" data-df="ll" > Feb 9, 2015 </em><h4 class="pt-0 my-2" data-toc-skip>Understanding Resource Pools in VMware</h4><div class="text-muted small"><p> It is my experience that resource pools are nearly a four letter word in the virtualization world. Typically I see a look of fear or confusion when I bring up the topic, or I see people using them ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/vcloud-director-8-10-renew-ssl-certificates/" class="btn btn-outline-primary" prompt="Older" ><p>vCloud Director 8.10 – Renew SSL Certificates</p></a> <a href="/posts/unifi-l2tp-set-a-static-ip-for-a-specific-user-built-in-radius-server/" class="btn btn-outline-primary" prompt="Newer" ><p>UniFi L2TP: set a static IP for a specific user (built-in Radius Server)</p></a></div><script type="text/javascript"> (function () { const origin = 'https://giscus.app'; const iframe = 'iframe.giscus-frame'; const lightTheme = 'light'; const darkTheme = 'dark_dimmed'; let initTheme = lightTheme; const html = document.documentElement; if ( (html.hasAttribute('data-mode') && html.getAttribute('data-mode') === 'dark') || (!html.hasAttribute('data-mode') && window.matchMedia('(prefers-color-scheme: dark)').matches) ) { initTheme = darkTheme; } let giscusAttributes = { src: 'https://giscus.app/client.js', 'data-repo': 'totaldebug/totaldebug.uk', 'data-repo-id': 'MDEwOlJlcG9zaXRvcnkzMTkxMTkxNTE=', 'data-category': 'General', 'data-category-id': 'DIC_kwDOEwVfL84CPpH4', 'data-mapping': 'pathname', 'data-reactions-enabled': '1', 'data-emit-metadata': '0', 'data-theme': initTheme, 'data-input-position': 'bottom', 'data-lang': 'en', crossorigin: 'anonymous', async: '' }; let giscusScript = document.createElement('script'); Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value) ); document.getElementById('tail-wrapper').appendChild(giscusScript); addEventListener('message', (event) => { if ( event.source === window && event.data && event.data.direction === ModeToggle.ID ) { /* global theme mode changed */ const mode = event.data.message; const theme = mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme; const message = { setConfig: { theme: theme } }; const giscus = document.querySelector(iframe).contentWindow; giscus.postMessage({ giscus: message }, origin); } }); })(); </script></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/centos/">centos</a> <a class="post-tag btn btn-outline-primary" href="/tags/docker/">docker</a> <a class="post-tag btn btn-outline-primary" href="/tags/linux/">linux</a> <a class="post-tag btn btn-outline-primary" href="/tags/unifi/">unifi</a> <a class="post-tag btn btn-outline-primary" href="/tags/best-practices/">best practices</a> <a class="post-tag btn btn-outline-primary" href="/tags/code-quality/">code quality</a> <a class="post-tag btn btn-outline-primary" href="/tags/automation/">automation</a> <a class="post-tag btn btn-outline-primary" href="/tags/configuration/">configuration</a> <a class="post-tag btn btn-outline-primary" href="/tags/container/">container</a> <a class="post-tag btn btn-outline-primary" href="/tags/exchange/">exchange</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div></div><footer><div class="container px-lg-4"><div class="d-flex justify-content-center align-items-center text-muted mx-md-3"><p>Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a></p><p>© 2023 <a href="https://github.com/marksie1988">Steven Marks</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author." >Some rights reserved.</span></p></div></div></footer><div id="mask"></div><button id="back-to-top" aria-label="back-to-top" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button> <script src="https://cdn.jsdelivr.net/combine/npm/jquery@3.6.1/dist/jquery.min.js,npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js,npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/lazysizes@5.3.2/lazysizes.min.js,npm/magnific-popup@1.1.0/dist/jquery.magnific-popup.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.6/dayjs.min.js,npm/dayjs@1.11.6/locale/en.min.js,npm/dayjs@1.11.6/plugin/relativeTime.min.js,npm/dayjs@1.11.6/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-ZDGYQV98HT"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-ZDGYQV98HT'); }); </script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="card post-preview"> <a style="text-decoration: none;" href="{url}"><div class="card-body"><h1 class="card-title"> {title}</h1><div class="card-text post-content"> {snippet}</div><div class="post-meta text-muted d-flex"><div class="mr-auto"> {categories} {tags}</div></div></div></a></div>', noResultsText: '<p class="mt-5"></p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<i class="bi bi-folder"></i>${value}`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<i class="bi bi-tag"></i>${value}`; } } } }); </script>
