<!doctype html><html lang="en" data-mode="dark"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="Automated release with Semantic Release and commitizen" /><meta name="author" content="Steven Marks" /><meta property="og:locale" content="en" /><meta name="description" content="When working with JavaScript projects, managing version numbers and commit messages is important for the maintainability of the project. Since 2020 I have been the main developer of Atomic Calendar Revive a highly customisable Home Assistant calendar card, I found maintaining versions and releases to be cumbersome until recently. In this article, I will introduce the commitizen and semantic-release packages for creation or appropriate commit messages and semantic versioning. I will also provide examples of how I am currently using these packages to streamline my release workflow and project maintenance." /><meta property="og:description" content="When working with JavaScript projects, managing version numbers and commit messages is important for the maintainability of the project. Since 2020 I have been the main developer of Atomic Calendar Revive a highly customisable Home Assistant calendar card, I found maintaining versions and releases to be cumbersome until recently. In this article, I will introduce the commitizen and semantic-release packages for creation or appropriate commit messages and semantic versioning. I will also provide examples of how I am currently using these packages to streamline my release workflow and project maintenance." /><link rel="canonical" href="https://totaldebug.uk/posts/automated-release-with-semantic-release-and-commitizen/" /><meta property="og:url" content="https://totaldebug.uk/posts/automated-release-with-semantic-release-and-commitizen/" /><meta property="og:site_name" content="TotalDebug" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2023-09-29T10:14:35+01:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Automated release with Semantic Release and commitizen" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Steven Marks"},"dateModified":"2023-09-29T10:39:34+01:00","datePublished":"2023-09-29T10:14:35+01:00","description":"When working with JavaScript projects, managing version numbers and commit messages is important for the maintainability of the project. Since 2020 I have been the main developer of Atomic Calendar Revive a highly customisable Home Assistant calendar card, I found maintaining versions and releases to be cumbersome until recently. In this article, I will introduce the commitizen and semantic-release packages for creation or appropriate commit messages and semantic versioning. I will also provide examples of how I am currently using these packages to streamline my release workflow and project maintenance.","headline":"Automated release with Semantic Release and commitizen","mainEntityOfPage":{"@type":"WebPage","@id":"https://totaldebug.uk/posts/automated-release-with-semantic-release-and-commitizen/"},"url":"https://totaldebug.uk/posts/automated-release-with-semantic-release-and-commitizen/"}</script><title>Automated release with Semantic Release and commitizen | TotalDebug</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="TotalDebug"><meta name="application-name" content="TotalDebug"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.20.1/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"><body><aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end"><header class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"> <img src="/assets/img/logo.png" width="112" height="112" alt="avatar" onerror="this.style.display='none'"> </a><h1 class="site-title"> <a href="/">TotalDebug</a></h1><p class="site-subtitle fst-italic mb-0">Technology. Inside Out</p></header><nav class="flex-column flex-grow-1 w-100 ps-0"><ul class="nav"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw bi bi-list-nested"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw bi bi-tags"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw bi bi-archive"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw bi bi-info-circle"></i> <span>ABOUT</span> </a><li class="nav-item"> <a href="/works/" class="nav-link"> <i class="fa-fw bi bi-kanban"></i> <span>WORKS</span> </a></ul></nav><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <a href="https://github.com/marksie1988" aria-label="github" target="_blank" rel="noopener noreferrer" > <i class="bi bi-github"></i> </a> <a href="https://www.linkedin.com/in/marksie1988" aria-label="linkedin" target="_blank" rel="noopener noreferrer" > <i class="bi bi-linkedin"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="bi bi-rss"></i> </a> <a href="https://discord.gg/6fmekudc8Q" aria-label="discord" > <i class="bi bi-discord"></i> </a></div></aside><div id="main-wrapper" class="d-flex justify-content-center"><div class="container d-flex flex-column px-xxl-5"><header id="topbar-wrapper" aria-label="Top Bar"><div id="topbar" class="d-flex align-items-center justify-content-between px-lg-3 h-100" ><nav id="breadcrumb" aria-label="Breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Automated release with Semantic Release and commitizen</span></nav><button type="button" id="sidebar-trigger" class="btn btn-link"> <i class="fas fa-bars fa-fw"></i> </button><div id="topbar-title"> Post</div><button type="button" id="search-trigger" class="btn btn-link"> <i class="fas fa-search fa-fw"></i> </button> <search class="align-items-center ms-3 ms-lg-0"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..." > </search> <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button></div></header><div class="row flex-grow-1"><main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4"><article class="px-1"><header><h1 data-toc-skip>Automated release with Semantic Release and commitizen</h1><div class="post-meta text-muted"> <span> Posted <time data-ts="1695978875" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Sep 29, 2023 </time> </span> <span> Updated <time data-ts="1695980374" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Sep 29, 2023 </time> </span><div class="mt-3 mb-3"> <a href="{name=" class="popup img-link shimmer"><img src="{"name"= loading="lazy"></a>"thumb.png"}" class="preview-img" alt="Preview Image" w="1200" h="630" ></div><div class="d-flex justify-content-between"> <span> By <em> <a href="https://github.com/marksie1988">Steven Marks</a> </em> </span> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="1382 words" > <em>7 min</em> read</span></div></div></header><div class="content"><p>When working with JavaScript projects, managing version numbers and commit messages is important for the maintainability of the project. Since 2020 I have been the main developer of <a href="https://github.com/totaldebug/atomic-calendar-revive">Atomic Calendar Revive</a> a highly customisable Home Assistant calendar card, I found maintaining versions and releases to be cumbersome until recently. In this article, I will introduce the <a href="https://github.com/commitizen/cz-cli">commitizen</a> and <a href="https://github.com/semantic-release/semantic-release">semantic-release</a> packages for creation or appropriate commit messages and semantic versioning. I will also provide examples of how I am currently using these packages to streamline my release workflow and project maintenance.</p><h2 id="the-old-days"><span class="me-2">The old days</span><a href="#the-old-days" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Starting out I had never developed a project like this in TypeScript, I had only ever worked on Python projects, So I was running <code class="language-plaintext highlighter-rouge">yarn run build</code> which would run rollup, build my js files into a dist folder, I would then commit the changes to a branch, create a PR, merge the PR then manually tag the new version and create the release on GitHub.</p><p>As you can see there are quite a few manual steps to achieve this which took too much time, time I could be spending on new features or bug fixes.</p><p>I knew there had to be a better way to do this, there was no way large teams were wasting this much time on releases and as a small one person dev, its even more important to save as much time as possible.</p><h2 id="what-is-semantic-release-and-how-does-it-work"><span class="me-2">What is Semantic-release and how does it work?</span><a href="#what-is-semantic-release-and-how-does-it-work" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><strong>semantic-release</strong> uses the commit message to determine the impact of changes in the codebase, with this it is able to automate updating the version number correctly and managing the release process for the project.</p><p>Semantic-release performs the following basic operations:</p><ol><li>Analyses commit messages to determine whether a new version is required.<li>If a new version is required, automatically determines the appropriate version number.<li>Updates the CHANGELOG file and creates the relevant Git tag.<li>Publishes a github release if required<li>Publishes the new version to the package manager if required.</ol><p>There are many other actions that it can perform via a great plugin architecture, so these are not limited to github / npm.</p><h2 id="what-is-commitizen-and-how-does-it-work"><span class="me-2">What is Commitizen and how does it work?</span><a href="#what-is-commitizen-and-how-does-it-work" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><strong>commitizen</strong> helps developers write commit messages in the same format, this also ensures that all commit messages follow the semantic versioning requirements.</p><p>Commitizen provides an interactive interface that prompts developers for specific information relating to that change, it then generates the commit message in the correct format, ensuring compatibility with semantic versions which ensures semantic-release can read the commit messages as expected.</p><picture> <source type="image/webp" srcset="/assets/img/posts/automated-release-with-semantic-release-and-commitizen/commitizen_tui.webp" /> <a href="/assets/img/posts/automated-release-with-semantic-release-and-commitizen/commitizen_tui.png" class="popup img-link shimmer"><img src="/assets/img/posts/automated-release-with-semantic-release-and-commitizen/commitizen_tui.png" alt="Commitizen TUI" loading="lazy"></a> </picture><h2 id="how-to-setup-semantic-release-and-commitizen"><span class="me-2">How to setup Semantic-release and Commitizen</span><a href="#how-to-setup-semantic-release-and-commitizen" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Below is a guide on how to use Semantic-release and Commitizen packages in your project, these are settings that I currently use but you can amend them to better suit your project.</p><ol><li>Install Semantic-release and Commitizen packages</ol><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>npm <span class="nb">install</span> <span class="nt">--save-dev</span> semantic-release commitizen cz-conventional-changelog
</pre></table></code></div></div><p title="Install components">If you find you are unable to use the <code class="language-plaintext highlighter-rouge">git cz</code> command after using the above install try this:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>npm <span class="nb">install</span> <span class="nt">-g</span> commitizen
</pre></table></code></div></div><p title="Install commitizen globally">This will install commitizen globally which seems to resolve the issue.</p><ol><li>Create a configuration file for <code class="language-plaintext highlighter-rouge">semantic-release</code> (<code class="language-plaintext highlighter-rouge">.release.rc</code>, <code class="language-plaintext highlighter-rouge">release.config.js</code> or <code class="language-plaintext highlighter-rouge">package.json</code>) an example of how I use <code class="language-plaintext highlighter-rouge">package.json</code>:</ol><div class="language-json highlighter-rouge"><div class="code-header"> <span data-label-text="JSON"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
</pre><td class="rouge-code"><pre><span class="nl">"release"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
 </span><span class="nl">"plugins"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
  </span><span class="p">[</span><span class="w">
   </span><span class="s2">"@semantic-release/commit-analyzer"</span><span class="p">,</span><span class="w">
   </span><span class="p">{</span><span class="w">
    </span><span class="nl">"preset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"conventionalcommits"</span><span class="w">
   </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="p">[</span><span class="w">
   </span><span class="s2">"@semantic-release/release-notes-generator"</span><span class="p">,</span><span class="w">
   </span><span class="p">{</span><span class="w">
    </span><span class="nl">"preset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"conventionalcommits"</span><span class="w">
   </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="p">[</span><span class="w">
   </span><span class="s2">"@semantic-release/npm"</span><span class="p">,</span><span class="w">
   </span><span class="p">{</span><span class="w">
    </span><span class="nl">"npmPublish"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
   </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="p">[</span><span class="w">
   </span><span class="s2">"@semantic-release/exec"</span><span class="p">,</span><span class="w">
   </span><span class="p">{</span><span class="w">
    </span><span class="nl">"prepareCmd"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yarn run build"</span><span class="w">
   </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"@semantic-release/changelog"</span><span class="p">,</span><span class="w">
  </span><span class="p">[</span><span class="w">
   </span><span class="s2">"@semantic-release/git"</span><span class="p">,</span><span class="w">
   </span><span class="p">{</span><span class="w">
    </span><span class="nl">"assets"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
     </span><span class="s2">"package.json"</span><span class="p">,</span><span class="w">
     </span><span class="s2">"changelog"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"chore(release): ${nextRelease.version} [skip ci]</span><span class="se">\n\n</span><span class="s2">${nextRelease.notes}"</span><span class="w">
   </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="p">[</span><span class="w">
   </span><span class="s2">"@semantic-release/github"</span><span class="p">,</span><span class="w">
   </span><span class="p">{</span><span class="w">
    </span><span class="nl">"assets"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
     </span><span class="p">{</span><span class="w">
      </span><span class="nl">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dist/atomic-calendar-revive.js"</span><span class="w">
     </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
   </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
 </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><p file="package.json">This configuration file contains settings used for semantic-release. Lets break this down:</p><ul><li><code class="language-plaintext highlighter-rouge">@semantic-release/commit-analyzer</code>: Analyses commit messages and determines how the version number should be incremented (major, minor, patch). I use the conventional commits format so set the preset to inform commit-analyzer, this will look out for the <code class="language-plaintext highlighter-rouge">!</code> to signify breaking changes etc.<li><code class="language-plaintext highlighter-rouge">@semantic-release/release-notes-generator</code>: Generates the release notes based on commit messages related to the new version.<li><code class="language-plaintext highlighter-rouge">@semantic-release/npm</code>: Updates the package.json file and publishes to the NPM package manager, I don’t publish to NPM manager so disabled this but i do need package.json updating with the latest version.<li><code class="language-plaintext highlighter-rouge">@semantic-release/exec</code>: This executes a command, in this case it will build my project ready for uploading to GitHub.<li><code class="language-plaintext highlighter-rouge">@semantic-release/changelog</code>: Creates or updates a CHANGELOG file based on the generated release notes.<li><code class="language-plaintext highlighter-rouge">@semantic-release/git</code>: Commits changes related to the new version to the git repository and creates the relevant git tag. I use this to commit the updated package.json into git and it also adds a commit message.<li><code class="language-plaintext highlighter-rouge">@semantic-release/github</code>: Publishes the new version to GitHub and creates the related GitHub release. I also upload the file generated by <code class="language-plaintext highlighter-rouge">@semantic-release/exec</code></ul><ol><li>Configure the <code class="language-plaintext highlighter-rouge">cz-conventional-changelog</code> adapter in <code class="language-plaintext highlighter-rouge">package.json</code></ol><div class="language-json highlighter-rouge"><div class="code-header"> <span data-label-text="JSON"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="p">{</span><span class="w">
  </span><span class="nl">"config"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"commitizen"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"./node_modules/cz-conventional-changelog"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><ol file="package.json"><li>Configure CI / CD, I use Github Actions in the below example:</ol><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="package.json"><i class="far fa-file-code fa-fw"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
</pre><td class="rouge-code"><pre><span class="na">name</span><span class="pi">:</span> <span class="s">Release</span>

<span class="na">on</span><span class="pi">:</span>
  <span class="na">push</span><span class="pi">:</span>
    <span class="na">branches</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">master</span>
      <span class="pi">-</span> <span class="s">beta</span>
  <span class="na">workflow_dispatch</span><span class="pi">:</span>
<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">release</span><span class="pi">:</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>

    <span class="na">steps</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Checkout code</span>
      <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/checkout@v2</span>

    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Setup Node.js</span>
      <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/setup-node@v2</span>

    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Install dependencies</span>
      <span class="na">run</span><span class="pi">:</span> <span class="s">yarn install</span>

    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Run Semantic Release</span>
      <span class="na">run</span><span class="pi">:</span> <span class="s">npx semantic-release</span>
      <span class="na">env</span><span class="pi">:</span>
        <span class="na">GITHUB_TOKEN</span><span class="pi">:</span> <span class="s">$</span>
</pre></table></code></div></div><h2 file=".github/workflows/release.yml" id="how-to-use-semantic-release-and-commitizen">How to use semantic-release and commitizen</h2><h3 id="commitizen"><span class="me-2">Commitizen</span><a href="#commitizen" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Simply run <code class="language-plaintext highlighter-rouge">git add .</code> then <code class="language-plaintext highlighter-rouge">git cz</code>, this command will run the interactive interface of Commitizen and ask you to write a properly formatted commit message.</p><h3 id="semantic-release"><span class="me-2">Semantic Release</span><a href="#semantic-release" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Semantic release by default uses the following branches:</p><ul><li><strong>master</strong> Regular releases to the default distribution channel<li><strong>N.N.x or N.x.x or N.x with N being a number</strong> Regular releases to a distribution channel matching the branch name from any existing branch with a name matching a maintenance release range<li><strong>next</strong> Regular releases to the next distribution channel<li><strong>next-major</strong> Regular releases to the next-major distribution channel<li><strong>beta (pre-release)</strong> pre-releases to the beta distribution channel<li><strong>alpha (pre-release)</strong> pre-releases to the alpha distribution channel from the branch</ul><p>You don’t need to use all of these branches, for example I currently only use the <code class="language-plaintext highlighter-rouge">beta</code> and <code class="language-plaintext highlighter-rouge">master</code> branches, All my development happens in beta, on commit it releases a pre-release version then once i’m happy its working I merge <code class="language-plaintext highlighter-rouge">beta</code> into <code class="language-plaintext highlighter-rouge">master</code> which will create the latest production release.</p><h2 id="how-are-version-numbers-determined-from-commit-messages"><span class="me-2">How are version numbers determined from commit messages</span><a href="#how-are-version-numbers-determined-from-commit-messages" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Semantic release wil analyze the commit message to determine what the new version number should be. This process works by analysing the words and prefixes in the commit message. Commitizen facilitates this by ensuring the conventional commits format is followed.</p><p>The conventional commit format states that commit messages should be formatted as follows:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>&lt;type&gt;([optional scope]): &lt;summary&gt;

[optional body]

[optional footer(s)]
</pre></table></code></div></div><ul><li><strong>type</strong>: Indicates the type of change (e.g., fix, feat, chore, docs, refactor, test, etc.).<li><strong>[optional scope]</strong> (optional): Describes the part of the project that the change is applied to.<li><strong>summary</strong>: A concise description of the change.<li><strong>[optional body]</strong> (optional): A more detailed description of the change if required.<li><strong>[optional footer(s)]</strong> (optional): Add tags to issues / reviewers etc.</ul><p>Semantic-release uses this information to determine how to update the version number:</p><ul><li>If at least one of the commit messages is <code class="language-plaintext highlighter-rouge">feat</code> type, the new version number will be subject to a “minor” increase (<code class="language-plaintext highlighter-rouge">0.1.0</code>).<li>If at least one of the commit messages contains <code class="language-plaintext highlighter-rouge">BREAKING CHANGE</code> in the body or <code class="language-plaintext highlighter-rouge">!</code> after the type, the new version number will be subject to a <strong>major</strong> increase (<code class="language-plaintext highlighter-rouge">1.0.0</code>).<li>In other cases, especially if at least one of the commit messages is <code class="language-plaintext highlighter-rouge">fix</code> type, the new version number will be subject to a <strong>patch</strong> increase (<code class="language-plaintext highlighter-rouge">0.0.1</code>).</ul><h2 id="final-thoughts"><span class="me-2">Final Thoughts</span><a href="#final-thoughts" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>With the help of semantic-release and commitizen packages, you can increase the quality and maintainability of your project by using automated versioning and creating appropriate, easy to understand commit messages. Due to this being compatible with CI/CD it also makes the development process more efficient saving precious time to be spent on improving the project or drinking coffee.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href="/categories/automation/">Automation</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/typescript/" class="post-tag no-text-decoration" >typescript</a> <a href="/tags/release/" class="post-tag no-text-decoration" >release</a> <a href="/tags/commitizen/" class="post-tag no-text-decoration" >commitizen</a> <a href="/tags/semantic-release/" class="post-tag no-text-decoration" >semantic-release</a></div><div class=" post-tail-bottom d-flex justify-content-between align-items-center mt-5 pb-2 " ><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper d-flex align-items-center"> <span class="share-label text-muted me-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Automated%20release%20with%20Semantic%20Release%20and%20commitizen%20-%20TotalDebug&url=https%3A%2F%2Ftotaldebug.uk%2Fposts%2Fautomated-release-with-semantic-release-and-commitizen%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter" > <i class="fa-fw bi bi-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Automated%20release%20with%20Semantic%20Release%20and%20commitizen%20-%20TotalDebug&u=https%3A%2F%2Ftotaldebug.uk%2Fposts%2Fautomated-release-with-semantic-release-and-commitizen%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook" > <i class="fa-fw bi bi-facebook"></i> </a> <a href="https://telegram.me/share?text=Automated%20release%20with%20Semantic%20Release%20and%20commitizen%20-%20TotalDebug&url=https%3A%2F%2Ftotaldebug.uk%2Fposts%2Fautomated-release-with-semantic-release-and-commitizen%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram" > <i class="fa-fw bi bi-telegram"></i> </a> <a href="https://news.ycombinator.com/submitlink?t=Automated%20release%20with%20Semantic%20Release%20and%20commitizen%20-%20TotalDebug&u=https%3A%2F%2Ftotaldebug.uk%2Fposts%2Fautomated-release-with-semantic-release-and-commitizen%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="HackerNews" target="_blank" rel="noopener" aria-label="HackerNews" > <i class="fa-fw bi bi-hacker-news"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Ftotaldebug.uk%2Fposts%2Fautomated-release-with-semantic-release-and-commitizen%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin" > <i class="fa-fw bi bi-linkedin"></i> </a> <button id="copy-link" aria-label="Copy link" class="btn small" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy link" data-title-succeed="Link copied successfully!" > <i class="fa-fw fas fa-link pe-none"></i> </button> </span></div></div></div></article></main><aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 mb-5 text-muted"><div class="access"><section id="access-lastmod"><h2 class="panel-heading">Recently Updated</h2><ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/posts/hll-better-performance-visibility/">Hell Let Loose, better performance and visibility settings</a><li class="text-truncate lh-lg"> <a href="/posts/automated-release-with-semantic-release-and-commitizen/">Automated release with Semantic Release and commitizen</a><li class="text-truncate lh-lg"> <a href="/posts/sunsynk-power-flow-card-with-lux-inverter/">Setup the Sunsynk Power Flow Card with a Lux Inverter</a><li class="text-truncate lh-lg"> <a href="/posts/solcast-api-home-assistant/">Integrate Solcast API with Home Assistant</a><li class="text-truncate lh-lg"> <a href="/posts/integrate-lux-inverter-with-home-assistant/">Integrating a Lux Power Inverter with Home Assistant</a></ul></section><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/centos/">centos</a> <a class="post-tag btn btn-outline-primary" href="/tags/docker/">docker</a> <a class="post-tag btn btn-outline-primary" href="/tags/linux/">linux</a> <a class="post-tag btn btn-outline-primary" href="/tags/unifi/">unifi</a> <a class="post-tag btn btn-outline-primary" href="/tags/best-practices/">best practices</a> <a class="post-tag btn btn-outline-primary" href="/tags/code-quality/">code quality</a> <a class="post-tag btn btn-outline-primary" href="/tags/home-assistant/">home-assistant</a> <a class="post-tag btn btn-outline-primary" href="/tags/automation/">automation</a> <a class="post-tag btn btn-outline-primary" href="/tags/configuration/">configuration</a> <a class="post-tag btn btn-outline-primary" href="/tags/container/">container</a></div></section></div><section id="toc-wrapper" class="ps-0 pe-4"><h2 class="panel-heading ps-3 pt-2 mb-2">Contents</h2><nav id="toc"></nav></section></aside></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4"><aside id="related-posts" aria-labelledby="related-label"><h3 class="mb-4" id="related-label">Further Reading</h3><nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><article class="col"> <a href="/posts/sqitch-sensible-database-change-management/" class="post-preview card h-100"><div class="card-body"> <time class="small" data-ts="1625612400" data-df="ll" > Jul 7, 2021 </time><h4 class="pt-0 my-2">Sqitch, Sensible database change management</h4><div class="text-muted small"><p> Overview Recently I have been working on a few projects that utilise PostgreSQL databases, as the projects have grown our team has found it increasingly more difficult to manage all of the databas...</p></div></div></a></article><article class="col"> <a href="/posts/cookiecutter-automate-project-creation/" class="post-preview card h-100"><div class="card-body"> <time class="small" data-ts="1636498800" data-df="ll" > Nov 9, 2021 </time><h4 class="pt-0 my-2">Cookiecutter: Automate project creation!</h4><div class="text-muted small"><p> As I move closer to the world of development within my career I have been looking for more efficient ways to spend my time, along with assisting my colleagues and myself follow the programming, doc...</p></div></div></a></article><article class="col"> <a href="/posts/proxmox-template-with-cloud-image-and-cloud-init/" class="post-preview card h-100"><div class="card-body"> <time class="small" data-ts="1664909640" data-df="ll" > Oct 4, 2022 </time><h4 class="pt-0 my-2">Proxmox Template with Cloud Image and Cloud Init</h4><div class="text-muted small"><p> Updated to latest Ubuntu image &amp;amp; Added enable for qemu service Using Cloud images and Cloud init with Proxmox is the quickest, most efficient way to deploy servers at this time. Cloud imag...</p></div></div></a></article></nav></aside><nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation"> <a href="/posts/hll-better-performance-visibility/" class="btn btn-outline-primary" aria-label="Older" ><p>Hell Let Loose, better performance and visibility settings</p></a><div class="btn btn-outline-primary disabled" aria-label="Newer"><p>-</p></div></nav><script type="text/javascript"> (function () { const origin = 'https://giscus.app'; const iframe = 'iframe.giscus-frame'; const lightTheme = 'light'; const darkTheme = 'dark_dimmed'; let initTheme = lightTheme; const html = document.documentElement; if ( (html.hasAttribute('data-mode') && html.getAttribute('data-mode') === 'dark') || (!html.hasAttribute('data-mode') && window.matchMedia('(prefers-color-scheme: dark)').matches) ) { initTheme = darkTheme; } let giscusAttributes = { src: 'https://giscus.app/client.js', 'data-repo': 'totaldebug/totaldebug.uk', 'data-repo-id': 'MDEwOlJlcG9zaXRvcnkzMTkxMTkxNTE=', 'data-category': 'General', 'data-category-id': 'DIC_kwDOEwVfL84CPpH4', 'data-mapping': 'pathname', 'data-reactions-enabled': '1', 'data-emit-metadata': '0', 'data-theme': initTheme, 'data-input-position': 'bottom', 'data-lang': 'en', 'data-loading': 'lazy', crossorigin: 'anonymous', async: '' }; let giscusScript = document.createElement('script'); Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value) ); document.getElementById('tail-wrapper').appendChild(giscusScript); addEventListener('message', (event) => { if ( event.source === window && event.data && event.data.direction === ModeToggle.ID ) { /* global theme mode changed */ const mode = event.data.message; const theme = mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme; const message = { setConfig: { theme: theme } }; const giscus = document.querySelector(iframe).contentWindow; giscus.postMessage({ giscus: message }, origin); } }); })(); </script><footer aria-label="Site Info" class=" d-flex flex-column justify-content-center text-muted flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3 " ><p> © <time>2024</time> <a href="https://github.com/marksie1988">Steven Marks</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author." >Some rights reserved.</span></p><p>Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a></p></footer></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-11 content"><div id="search-hints"><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/centos/">centos</a> <a class="post-tag btn btn-outline-primary" href="/tags/docker/">docker</a> <a class="post-tag btn btn-outline-primary" href="/tags/linux/">linux</a> <a class="post-tag btn btn-outline-primary" href="/tags/unifi/">unifi</a> <a class="post-tag btn btn-outline-primary" href="/tags/best-practices/">best practices</a> <a class="post-tag btn btn-outline-primary" href="/tags/code-quality/">code quality</a> <a class="post-tag btn btn-outline-primary" href="/tags/home-assistant/">home-assistant</a> <a class="post-tag btn btn-outline-primary" href="/tags/automation/">automation</a> <a class="post-tag btn btn-outline-primary" href="/tags/configuration/">configuration</a> <a class="post-tag btn btn-outline-primary" href="/tags/container/">container</a></div></section></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><aside aria-label="Scroll to Top"> <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button></aside></div><div id="mask"></div><aside id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-bs-animation="true" data-bs-autohide="false" ><div class="toast-header"> <button type="button" class="btn-close ms-auto" data-bs-dismiss="toast" aria-label="Close" ></button></div><div class="toast-body text-center pt-0"><p class="px-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></aside><script src="https://cdn.jsdelivr.net/combine/npm/jquery@3.6.1/dist/jquery.min.js,npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js,npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/magnific-popup@1.1.0/dist/jquery.magnific-popup.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.6/dayjs.min.js,npm/dayjs@1.11.6/locale/en.min.js,npm/dayjs@1.11.6/plugin/relativeTime.min.js,npm/dayjs@1.11.6/plugin/localizedFormat.min.js,npm/tocbot@4.20.1/dist/tocbot.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-ZDGYQV98HT"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-ZDGYQV98HT'); }); </script> <script> /* Note: dependent library will be loaded in `js-selector.html` */ SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<article class="px-1 px-sm-2 px-lg-4 px-xl-0"><header><h2><a href="{url}">{title}</a></h2><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div></header><p>{snippet}</p></article>', noResultsText: '<p class="mt-5"></p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
